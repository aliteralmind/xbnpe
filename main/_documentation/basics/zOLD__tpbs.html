<HTML><HEAD>
	<TITLE>XBNPE: tp-bootstraps</TITLE>
	<meta name="viewport" content="width=device-width" />
</HEAD>

<BODY BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#0000FF"><a name="top"></a>


<P>[<A HREF="../index.html#basics">BACK</A>]</CODE></P>

<HR/>

<H1>XBN-PhraseExpress: TextPad-bootstraps</H1>

<P>TextPad-bootstraps are what make it possible for XBN-PhraseExpress and TextPad to communicate.</P>

<P>Specifically, a &quot;<B>TextPad-bootstrap</B>&quot; (or &quot;tp-bootstrap&quot;, or <CODE>&quot;tpbs&quot;</CODE>) is a <I>TextPad built-in command</I> that is depended on by one of the &quot;foundational&quot; XBNPE projects: XBNPE-Key-Presses (<A HREF="xkp.html">XKP-project</A>) and TextPad built-in commands (<A HREF="tpkc/index.html">TPKC-project</A>).</LI>
</UL>Specifically, XKP and TPKC cannot be installed until all of their required tp-bootstraps are installed first.</P>

<P><B>Contents:</B><UL>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#terminology">GO</A></B></FONT>]</CODE> &nbsp; Terminology</LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#format">GO</A></B></FONT>]</CODE> &nbsp; Format and requirements<UL>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#mainp">GO</A></B></FONT>]</CODE> &nbsp; Main phrase</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#escp">GO</A></B></FONT>]</CODE> &nbsp; Escaped (literalized) phrase</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#tpkp">GO</A></B></FONT>]</CODE> &nbsp; TextPad key-press phrase</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#locations">GO</A></B></FONT>]</CODE> &nbsp; Phrase and file locations</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#2files">GO</A></B></FONT>]</CODE> &nbsp; Split into two files</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#charsnot">GO</A></B></FONT>]</CODE> &nbsp; Commands in the &quot;Characters&quot; category may not be TextPad-bootstraps</LI>
	</UL></LI>
	<LI><B>Installation and configuration: Step-by-step</B><UL>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#install">GO</A></B></FONT>]</CODE> &nbsp; Before the XKP/TPKC-projects are installed</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpkc/user_cmd_cfg.html#assignkcs">GO</A></B></FONT>]</CODE> &nbsp; After the TPKC-build-process is complete &nbsp; &nbsp; <I>(documented elsewhere)</I></LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#tpbsaddsteps">GO</A></B></FONT>]</CODE> &nbsp; Adding a new tp-bootstrap to XBN-PhraseExpress <I>(XBNPE-admins only)</I></LI>
	</UL></LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="xkp.html#tpbs">GO</A></B></FONT>]</CODE> &nbsp; The list of TextPad-bootstraps for the XKP-project</LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpkc/index.html#tpbs">GO</A></B></FONT>]</CODE> &nbsp; The list of TextPad-bootstraps for the TPKC-project</LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#utilities">GO</A></B></FONT>]</CODE> &nbsp; tp-bootstrap-related utilities</LI>
</UL></P>

<P>To reiterate: TextPad-bootstraps are what <A HREF="http://youtu.be/EhU862ONFys?t=56s">make it possible</A> for XBN-PhraseExpress and TextPad to communicate.</P>


<PRE>

<HR/>

</PRE>
<A NAME="terminology"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstraps: Terminology</H2>

<P>A &quot;<B>TextPad-bootstrap</B>&quot; is a built-in TextPad command that is critical to either the XKP or TPKC-project. The key-command assigned to a TextPad-bootstrap is called a <B>&quot;bootstrap key-command&quot;</B>. Any other key-commands assigned to a tp-bootstrap (or <I>any</I> key-command assigned to <I>any</I> other built-in TextPad command), are each called a &quot;<B>Non-BootStrap key-command</B>&quot; or &quot;Non-BootStrap kc&quot;, or <CODE>&quot;<B>nbs-kc</B>&quot;</CODE>.</P>

<P>A &quot;<B>Non-BootStrap command</B>&quot;, or &quot;<B>nbs-command</B>&quot;, is simply a command that is not a tp-bootstrap--whether or not it has a key-commands assigned to it. An &quot;<B>nbs-phrase</B>&quot; is a phrase that triggers a non-bootstrap command.</P>

<P>The &quot;<B>primary key-command</B>&quot; for a TextPad command is:<UL>
	<LI><B>if it is a tp-bootstrap:</B> The bootstrap-kc</LI>
	<LI><B>if it is not a tp-bootsrap:</B> nbs-kc number one.</LI>
</UL>If it has no kc-s (is not a bootstrap, and its nbs-kc count is zero), it has no primary-kc.</P>

<PRE>

<HR/>

</PRE>
<A NAME="tpbsaddsteps"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstraps: Steps for adding a new tp-bootstrap (for XBNPE-admins only)</H2>

<P><I>(See: <A HREF="tpbs2.html#locations">locations</A> and <A HREF="tpbs2.html#2files">two-files</A>)</I></P>

<P><I>This section is meant for XBNPE-developers only.</I></P>

<P><OL>
	<LI>Remove that TextPad command from its current location (its current phrase-file), and place it into the <A HREF="tpbs2.html#mainp">main</A> tp-bootstrap file for either the <A HREF="xkp.html">XKP</A> or <A HREF="tpkc/index.html">TPKC</A> project (<I>for <B>all</B> users in
	<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_tpkc}/textpad__tpkc/for_v_7_0_9/user_config/</CODE>
	<BR>!!!</I>).</LI>
	<LI>Create its corresponding &quot;non-main&quot; phrases (<CODE>&quot;<A HREF="tpbs2.html#escp">Esc</A>&quot;</CODE> and <CODE>&quot;<A HREF="tpbs2.html#tpkp">TPKeys</A>&quot;</CODE>)</LI>
	<LI>Add it to the regular expression for marking lines in the tp-all-cmd-list, in the tpbs section in XKP and TPKC.</LI>
	<LI>Change its raw global config from, for example:
	<BR> &nbsp; &nbsp; <CODE>BookmarkPrev	zTPBookmarkGTPrev	Srchmkprv	<B>__ES__</B>	100	{#insert zDOWN3}</CODE>
	<BR>to
	<BR> &nbsp; &nbsp; <CODE>BookmarkPrev	zTPBookmarkGTPrev	Srchmkprv	<B>yes</B>	100	{#insert zDOWN3}</CODE>
	<BR>and either<UL>
		<LI>Run the entire TPKC-build-process from  <A HREF="tpkc/sub_build_proc.html#02">sub-build-proc 02</A> through <A HREF="tpkc/sub_build_proc2.html#14">14</A>, </LI>
		<LI>or:<OL>
			<LI>Run TPKC-build-process 02.</LI>
			<LI>Update (for example)
			<BR> &nbsp; &nbsp; <CODE>zTpkcSrchmkprvIsBtstrp_yes</CODE>
			<BR>in
			<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_AG_tpkc}\cmd_cfg_global__bldprc06\search\search_BookmarkPrev.px.txt</CODE>
			<BR>from <I>nothing</I> (the empty-string) to &quot;<B>yes</B>&quot;.</LI>
			<LI>Import both
			<BR> &nbsp; &nbsp; <CODE>search_BookmarkPrev.px.txt</CODE>
			<BR>and the phrase-file output by build-proc-02.</LI>
		</OL></LI>
	</UL></LI>
	<LI>Add a test to the appropriate tp-bootstrap testing script (either
	<BR> &nbsp; &nbsp; <CODE>zTestAllXKPTextPadBootstraps</CODE>
	<BR>or
	<BR> &nbsp; &nbsp; <CODE>zTestAllTpkcTextPadBootstraps</CODE>
	<BR>). If this command was in the TPKC project, and is being moved to the XKP project, then its <A HREF="tpkc/user_menu.html#tpkcumac1ctest">TPKC-test</A> must be changed from <A HREF="tpkc/user_menu.html#tpkcumac1ctestnbs">Non-BootStrap</A> to <A HREF="tpkc/user_menu.html#tpkcumac1ctesttpbs">bootstrap</A>.</LI>
	<LI>Delete all TPKC-nbs phrase files (as output by build-proc-14). <I>(At the very least, delete these tp-bootstrap phrases from them, at least in PhraseExpress. <B>Not</B> deleting them will cause conflicts when running the tp-bootstrap test in the next step.)</I></LI>
	<LI>Import the new tp-bootstrap tests and run it!</LI>
	<LI>All tp-bootstraps, <I>regardless which project they are bootstraps for</I>, are listed in the TPKC ddmenu-file:
	<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_tpkc}/textpad__tpkc/for_v_7_0_9/user_config/<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_ALL_cmds_pcddmenu.txt">tp_ALL_cmds_pcddmenu</A>.txt</CODE>
	<BR>(This is the <U>input</U> file for TPKC-build-proc-15.) If not there yet, add <CODE>&quot;[BS]&quot;</CODE> to its ddmenu-entry.</LI>
	<LI>Run TPKC-build-processes 10 through 14 (and, less critically, 15)--<I>for all users</I>.</LI>
	</OL></LI>
	<LI>Notify all users of this change and the steps they need to take. They're not going to like you very much.</LI>
	<LI>Change the number of tpbs-s documented at the bottom of <CODE><A HREF="tpkc/sub_build_proc.html#02">sub_build_proc.html#02</A></CODE>.</LI>
</OL></P>
<PRE>

<HR/>

</PRE>
<A NAME="charsnot"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; Commands in the &quot;Characters&quot; category may not be TextPad-bootstraps</H2>

<P>The &quot;Characters&quot; category is the only one in which commands do not have names. Instead, the &quot;name&quot; of each command is the character itself. This is unacceptable to the <A HREF="tpkc/index.html">TPKC-project</A>. The TPKC-build process (<A HREF="tpkc/sub_build_proc2.html#11">sub-build-proc-11</A>) therefore changes each to a <A HREF="../../textpad__tpkc/for_v_7_0_9/documentation_and_scripts/_char_category_cmd_name_alternatives.txt">specific name</A>**. For example, <CODE>'Ã'</CODE> is changed to <CODE>&quot;Char14AUpperTilde&quot;</CODE>. Since this translation does not occur until after the TPKC-project is installed <I>and built</I> (meaning all build processes from <A HREF="tpkc/sub_build_proc.html#02">02</A> through <A HREF="tpkc/sub_build_proc2.html#14">14</A> are successfully executed), no commands in this category may not be used as TextPad-bootstraps, until after all TPKC build processes have been successfully executed.</P>

<P>This restriction only applies to the XKP and TPKC projects.</P>

<P>**(see the bottom of <A HREF="tpkc/build_proc_tech_info2.html#creatergc_2catcfg">section two</A>, under <A HREF="tpkc/build_proc_tech_info2.html#bldrgc">TPKC-build: Before everything else: Manually creating the raw-global-configuration</A>, in the TPKC-build-process <A HREF="tpkc/build_proc_tech_info.html">technical documentation</A>)</P>

<P><IMG SRC="images/char_cat_in_tp_prefs.jpg" BORDER="1"/></P>

<PRE>

<HR/>

</PRE>
<A NAME="format"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstrap: Format and requirements</H2>


<P>An example TextPad-bootstrap:</P>

<PRE STYLE="background-color:#E1E1E1;"><B><U>zTPCopy</U></B> -- TextPad built-in command: Edit &gt; <B>EditCopy</B>
   {#CTRL -chars c}{#insert <A HREF="../devpex/debugging.html#kpspeed">zTSlp</A>}{#sleep 10}
<B><U>zTPCopyEsc</U></B>
   \\\{#CTRL -chars c\\\}\\\{#insert zTSlp\\\}\\\{#sleep 10\\\}
<B><U>zTPCopyTPKeys</U></B>
   Ctrl+C</PRE>

<P><I>(This is displayed in <A HREF="../devpex/c2pl.html#one">un-compressed</A> format. Also see <A HREF="phrase_file.html#pformat">phrase-format specifications</A>. Note that, for every project, these three phrases are split into <A HREF="tpbs2.html#2files">two files</A>)</I></P>

<P>These three phrases, as a whole, define a TextPad-bootstrap.<OL>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#mainp">GO</A></B></FONT>]</CODE> &nbsp; <B>Main phrase:</B> <CODE>zTPCopy</CODE></LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#escp">GO</A></B></FONT>]</CODE> &nbsp; <B>Escaped (literalized) phrase:</B> <CODE>zTPCopyEsc</CODE></LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs2.html#tpkp">GO</A></B></FONT>]</CODE> &nbsp; <B>TextPad key-press phrase:</B> <CODE>zTPCopyTPKeys</CODE></LI>
</OL></P>

<P>Collectively, the escaped and tp-key-press phrases are called the &quot;non-main&quot; tp-bootsrap phrases.</P>

<P>To &quot;install&quot; a TextPad-bootstrap is to simply create (and then <A HREF="phrase_file_import1.html">import</A>) these three phrases, and actually assign the configured key-command, via
<BR> &nbsp; &nbsp; <CODE>Textpad &gt; Configure &gt; Preferences &gt; Keyboard</CODE>
<BR><I>(See the screenshot below.)</I> Unfortunately, this is a largely manual process. For example, <CODE>&quot;<A HREF="../devpex/c2pl.html">c2pl</A>&quot;</CODE> and its related utilities--along with everything else in XBN-PhraseExpress--are not available until at least the XKP-project is installed. Importantly, any errors in a tp-bootstrap will cause its depend-<I>ing</I> XBNPE-projects to fail--unpredictably, and without any diagnostic information. Each major XBNPE project, however, has a <A HREF="#utilities">testing function</A> to ensure that all bootstraps are, at least roughly, properly installed.</P>

<P><I>TextPad-bootstraps--as well a much of XBN-PhraseExpress--are only useful, and usable, from within the TextPad application.</I></P>

<P><IMG SRC="images/edit_copy_kc_in_tp_prefs.jpg" BORDER="1"/></P>

<PRE>

<HR/>

</PRE>
<A NAME="install"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; Configuring tp-bootstraps for the XKP (or TPKC) project: Step-by-step</H2>

<P><I>[go to the <A HREF="#install2">next step</A>]</I></P>

<P>This section describes how to install all TextPad-bootstraps in preparation for installing the XKP or TPKC-projects. <I>The steps in this section must be run first for the <A HREF="xkp.html">XKP-project</A>, and then again for the <A HREF="tpkc/index.html">TPKC-project</A>.</I></P>

<P>For every <A HREF="xkp.html#tpbs">TextPad-bootstraps in the XKP-project</A> (or <A HREF="tpkc/index.html#tpbs">TPKC-project</A>):<OL>
	<LI>Assign it a key-command it TextPad, <I>or simply confirm that an <B>existing</B> key-command is sufficient</I>, via
	<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Configure &gt; Preferences &gt; Keyboard &gt; Categories &gt; <I>[category-name]</I> &gt; Commands &gt; <I>[command-name]</I> &gt; &quot;Press a new shortcut key&quot; &gt; [Assign-button]</CODE></LI>
	<LI>When a key-command has been assigned to every tp-bootstrap, <A HREF="tpkc/tpacl.html">print out the TextPad-all-command-list</A> (note that there is no need to save the document at this time)</LI>
	<LI>Mark and copy all lines containing these tp-bootstraps (steps 1 through 5 below can be done directly in the Tool Output document):<OL>
		<LI>Open the find-dialog and tick the &quot;Regular expression&quot; checkbox.</LI>
		<LI>Paste in the &quot;Regex for marking all in the TextPad all-command list&quot;, (at the top of <A HREF="xkp.html#tpbs">XKP's tp-bootstrap section</A> [or <A HREF="tpkc/index.html#tpbs">TPKC</A>])</LI>
		<LI>Press the <CODE>[Mark All]</CODE> button.</LI>
		<LI>Copy all marked lines with <I>(assuming menus have default configuration):</I>
		<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Edit &gt; Copy other &gt; Bookmarked lines</CODE></LI>
		<LI>Close the tp-all-command-list (the Tool Output window)</LI>
		<LI>Open a new document and paste the lines.</LI>
		<LI>Recommended: If any of these commands have more than one key-command, delete every one except those you just assigned (or confirmed)--the remaining one is the <A HREF="#terminology">primary key-command</A>.</LI>
	</OL></LI>
</OL></P>

<P><I>[Proceed to the <A HREF="#install2">next step</A>]</I></P>

<a name="install2"/><H3><B><CODE>[<A HREF="#install">PREV</A> -- NEXT]</CODE></B> &nbsp; &nbsp; Configuring tp-bootstraps for the XKP (or TPKC) project: Step-by-step</H3>

<P>As an example, here is the resulting text for a &quot;fresh&quot; TextPad installation (as if TextPad was just installed, and no custom key-commands were assigned), for all tp-bootstraps in the XKP-project:</P>

<PRE STYLE="background-color:#E1E1E1;">DocumentStart           Ctrl+Home
EditCopy                Ctrl+C
EditCut                 Ctrl+X
EditDupLine             Ctrl+Shift+Alt+V
EditPaste               Ctrl+V
FileClose               Ctrl+W
FileNew                 Ctrl+N
FileSave                Ctrl+S
SelectAll               Ctrl+A
ToggleWordWrap          Ctrl+Q, W
WordLeftExtend          Ctrl+Shift+Left
WordRightEnd            Ctrl+Right
WordRightEndExtend      Ctrl+Shift+Right</PRE>

<P><OL START="4">
	<LI><I><B>Duplicate</B></I> exactly one set of the below phrase-files into your <A HREF="tpkc/tpkc_user_dir.html#ondisk">on-disk</A> TPKC-<A HREF="tpkc/tpkc_user_dir.html">user-directory</A> before editing them. Do not change the original files! Using these above lines as a guide, all the <A HREF="tpbs2.html#mainp">main</A>, <A HREF="tpbs2.html#escp">escaped</A>, and <A HREF="tpbs2.html#tpkp">tp-key</A> phrases must be created for each tp-bootstrap.<UL>
		<LI><B><U>Blank templates</U></B> for the<UL>
			<LI>XKP project: <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_xkp_project.px.txt">main</A>,  <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_xkp_project_esc_tpk.px.txt">non-main</A></LI>
			<LI>TPKC project: <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_tpkc_project.px.txt">main</A>,  <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_tpkc_project_esc_tpk.px.txt">non-main</A></LI>
		</UL></LI>
		<LI>And here they are for a &quot;<B><U>TextPad fresh-installation</U></B>&quot;. (If your tp-bootstrap key-commands happen to be the same, or mostly the same, as these, then these phrase-files may be a better starting point).<UL>
			<LI>XKP project: <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_xkp_project.px.txt">main</A>,  <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_xkp_project_esc_tpk.px.txt">non-main</A></LI>
			<LI>TPKC project: <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_tpkc_project.px.txt">main</A>,  <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_tpkc_project_esc_tpk.px.txt">non-main</A></LI>
		</UL></LI>
	</UL></LI>
	<LI>Import the phrases to the <A HREF="tpkc/tpkc_user_dir.html#13file">required location</A> in PhraseExpress.</LI>
	<LI>When all tp-bootstrap phrases are properly setup, test them by executing the proper testing <A HREF="#utilities">utility</A><UL>
		<LI>XKP-project: <CODE>testtpbsxkp</CODE></LI>
		<LI>TPKC-project: <CODE>testtpkeyphrasec</CODE> or <CODE>testtpbsxkptpkc</CODE></LI>
	</UL>Closely follow the instructions. When these tests are completely successful, then all TextPad-bootstraps are fully installed.</LI>
</OL></P>



<PRE>




























</PRE>
</BODY></HTML>



