<HTML><HEAD>
	<TITLE>XBNPE: tp-bootstraps</TITLE>
	<meta name="viewport" content="width=device-width" />
</HEAD>

<BODY BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#0000FF"><a name="top"></a>


<P>[<A HREF="../index.html#basics">BACK</A>]</CODE></P>

<HR/>

<H1>XBNPE: TextPad-bootstraps</H1>

<P>The most fundamental concept in XBN-PhraseExpress is &quot;TextPad-bootstraps&quot;. Before almost anything in XBN-PhraseExpress can function, TextPad-bootstraps must be installed. TextPad-bootstraps are commands that are built into the TextPad application, such as
<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Configure &gt; Preferences &gt; Keyboard &gt; Categories &gt; &quot;Edit&quot; &gt; Commands &gt; &quot;<B><U>EditCopy</U></B>&quot;</CODE>
<BR>Only the <A HREF="xkp.html">XKP</A> and <A HREF="tpkc/index.html">TPKC</A> projects have TextPad-bootstraps. While other projects require certain built-in TextPad commands, these are &quot;non-bootstrap&quot; (nbs) commands, and are installed in a different way.</P>

<P><B>Contents:</B><UL>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#depend">GO</A></B></FONT>]</CODE> &nbsp; XBN-PhraseExpress project dependencies</LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs_format.html#format">GO</A></B></FONT>]</CODE> &nbsp; TextPad-bootstraps: Format and specifications &nbsp; &nbsp; <I>(3 phrases: <A HREF="tpbs_format.html#mainp">main</A>, <A HREF="tpbs_format.html#escp">escaped</A>, <A HREF="tpbs_format.html#tpkp">tp-key-press</A>)</I></LI>
	<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#locations">GO</A></B></FONT>]</CODE> &nbsp; Phrase and file locations</LI>
	<LI><B>Installing a TextPad bootstrap:</B><UL>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpbs_install.html">GO</A></B></FONT>]</CODE> &nbsp; Step-by-step (pre XKP and TPKC installation)</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpkc/user_cmd_cfg.html#assignkcs">GO</A></B></FONT>]</CODE> &nbsp; Step-by-step (post XKP and TPKC installation: nbs-commands)</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="#promote">GO</A></B></FONT>]</CODE> &nbsp; <I>For XBNPE-developers only:</I> Promoting an nbs-command to a tp-bootstrap</LI>
	</UL></LI>
	<LI><B>TextPad-bootstraps</B> as required by<UL>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="xkp.html#tpbs">GO</A></B></FONT>]</CODE> &nbsp; The XKP-project</LI>
		<LI><CODE>[<FONT SIZE="+1"><B><A HREF="tpkc/index.html#tpbs">GO</A></B></FONT>]</CODE> &nbsp; The TPKC-project</LI>
	</UL></LI>
</UL></P>

<P>In TextPad version 7.0.9, there are 332 built-in commands. 26 of them are TextPad-bootstraps (8%).</P>



<PRE>

<HR/>

</PRE>
<A NAME="locations"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstraps: Phrase and file locations</H2>

<P>All TextPad-bootstraps, for both the <A HREF="xkp.html">XKP</A> and <A HREF="tpkc/index.html">TPKC</A> projects are stored in a single directory: the root directory of your <A HREF="tpkc/tpkc_user_dir.html">TPKC-user-directory</A>.<UL>
	<LI><B>On disk</B> (<A HREF="phrase_file.html#fformat">phrase-files</A>)<UL>
		<LI><U>Directory:</U> <CODE>{#insert <A HREF="tpkc/tpkc_user_dir.html#zXPROOT_DIR_tpkcUsrCfgUserBase_M_tudn">zXPROOT_DIR_tpkcUsrCfgUserBase_M_tudn</A>}</CODE><UL>
			<LI><A HREF="tpbs_format.html#mainp">Main</A> phrase-files:
			<BR> &nbsp; &nbsp; <CODE>tp_bootstraps_for_xkp_project.px.txt</CODE> &nbsp; &nbsp; <I>(<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_xkp_project.px.txt">tpfi</A>--for tpkc-user-dir name=<CODE>&quot;tp_frsh_instl&quot;</CODE>, <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_xkp_project.px.txt">blank template</A>)</I>
			<BR> &nbsp; &nbsp; <CODE>tp_bootstraps_for_tpkc_project.px.txt</CODE> &nbsp; &nbsp; <I>(<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_tpkc_project.px.txt">tpfi</A>, <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_tpkc_project.px.txt">template</A>)</I></LI>
			<LI>&quot;Non-main&quot; (<A HREF="tpbs_format.html#escp">escaped</A> and <A HREF="tpbs_format.html#tpkp">TextPad-key-press</A>) phrase-files:
				<BR> &nbsp; &nbsp; <CODE>tp_bootstraps_for_xkp_project_esc_tpk.px.txt</CODE> &nbsp; &nbsp; <I>(<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_xkp_project_esc_tpk.px.txt">tpfi</A>, <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_xkp_project_esc_tpk.px.txt">template</A>)</I>
				<BR> &nbsp; &nbsp; <CODE>tp_bootstraps_for_tpkc_project_esc_tpk.px.txt</CODE> &nbsp; &nbsp; <I>(<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/tp_bootstraps_for_tpkc_project_esc_tpk.px.txt">tpfi</A>, <A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/TPKC_USER_DIR_NAME/tp_bootstraps_for_tpkc_project_esc_tpk.px.txt">template</A>)</I></LI>
			</UL></LI>
		</UL></LI>
		<LI><B>PhraseExpress folder</B> (to <A HREF="phrase_file_import1.html">import</A> into)
		<PRE>    XBNPE: Parent-folder &gt;
       XBN-PhraseExpress &gt;
<I>(<A HREF="tpkc/index.html#inpex">go</A>)</I>      XBNPE-TPKC: TextPad Built-in commands &gt;
             XBNPE-TPKC: User-specific phrases: <I>[TPKC_USER_DIR_NAME]</I>
                <B>TextPad-bootstraps</B></PRE></LI>
	</UL></LI>
</UL></P>

<P><I>Splitting TextPad-bootstraps into these two files makes <A HREF="tpkc/tpkc_user_dir.html#remotebuild">remote-builds</A> possible.</I></P>
<PRE>

<HR/>

</PRE>
<A NAME="depend"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; XBN-PhraseExpress project dependencies</H2>


<P>The most fundamental project in XBN-PhraseExpress is the
<BR> &nbsp; &nbsp; XBNPE-Key-presses (<A HREF="xkp.html">XKP</A>) project
<BR>The only project that directly depends on it is the
<BR> &nbsp; &nbsp; TextPad built-in command (<A HREF="tpkc/index.html">TPKC</A>) project
<BR>All other projects in XBN-PhraseExpress depend (directly) on TPKC.</P>

<P>These two foundational projects depend on <A HREF="tpbs.html">TextPad-bootstraps</A>. There are TextPad-bootstraps exclusive to the XKP-project, and some exclusive to TPKC. These projects cannot be installed until their tp-bootstraps are installed first. TextPad-bootstraps are built-in TextPad commands that must be manually installed by you.</P>

<P><I>No other XBN-PhraseExpress projects have TextPad-bootstraps.</I> Other projects, such as
<BR> &nbsp; &nbsp; XBNPE-Search and Replace (<A HREF="../tasks/snr.html">SNR</A>)
<BR>also require certain built-in TextPad commands to exist, but they are considered &quot;non-bootstrap&quot; (nbs) commands and are <A HREF="tpkc/user_cmd_cfg.html#assignkcs">configured</A> in a different way: in your TPKC <A HREF="tpkc/user_cmd_cfg.html">user-specific</A> command-configuration.</P>

<P>(The SNR-project is the only project directly dependent on TPKC. All other XBN-PhraseExpress projects depend on SNR.)</P>

<P><IMG SRC="../images/basics/dependency_tree.jpg" BORDER="1"/></P>





<PRE>

<HR/>

</PRE>
<A NAME="utilities"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstraps: Utilities</H2>

<H3>Verification of all TextPad-bootstraps (<CODE><A HREF="../devpex/xbnpe_ddmenus.html#xh">xh</A>tk</CODE>)</H3>

<P>Follow all instructions carefully.<UL>
	<LI><CODE>testtpbsxkp</CODE>: Verifies all XKP-required tp-bootstraps.</LI>
	<LI><CODE>testtpbstpkc</CODE>: Verifies all TPKC-required tp-bootstraps.</LI>
	<LI><CODE>testtpbsxkptpkc</CODE>: Calls <CODE>testtpbsxkp</CODE> and then <CODE>testtpkpc</CODE>.</LI>
</UL></P>

<H3>Name and value of &quot;non-main&quot; tp-bootstrap phrases (<CODE>xhtb</CODE>)</H3>

<P>All these utilities require the name of the <A HREF="tpbs_format.html#mainp">main</A> tp-bootstrap phrase to be in a <A HREF="xbnpe_phrase_types.html#variable">variable</A> named
<BR> &nbsp; &nbsp; <CODE>zvBTSTRP_PHRS_NM</CODE></P>

<P><UL>
	<LI><B><CODE>zTPBtstrpEscKC_M_bspm</CODE>:</B> Gets the <A HREF="tpbs_format.html#escp">escaped key-command</A>, <I>after unescaping it</I></LI>
	<LI><B><CODE>zTPBtstrpEscPhrsNm_M_bspm</CODE>:</B> Gets the name of the phrase containing the escaped key-command.</LI>
	<LI><B><CODE>zTPBtstrpTPKeys_M_bspm</CODE>:</B> Gets the value of the <A HREF="tpbs_format.html#tpkp">TextPad key-press</A>.</LI>
	<LI><B><CODE>zTPBtstrpTPKeysPhrsNm_M_bspm</CODE>:</B> Gets the name of the phrase containing the TextPad key-press.</LI>
</UL></P>

<H3><A HREF="../index.html#tasks">Live</A> example</H3>

<PRE STYLE="background-color:#E1E1E1;"><!--xcfexample...START  //  {#BALLOON -title tpbsutildemo -text About to start}{#sleep 2000}--><B><U>tpbsutildemo</U></B>
   {#SETPHRASE -description zvBTSTRP_PHRS_NM -content zTPCopy -autotext zvBTSTRP_PHRS_NM -folder ctvv_folder}
   {#insert zTPBtstrpEscPhrsNm_M_bspm}:{#ENTER}{#TAB}
      {#insert zTPBtstrpEscKC_M_bspm}{#ENTER}{#BKSP}
   {#insert zTPBtstrpTPKeysPhrsNm_M_bspm}:{#ENTER}{#TAB}
      {#insert zTPBtstrpTPKeys_M_bspm}{#ENTER}<!--xcfexample...END  //  XXX--></PRE>

<P>Output:</P>

<PRE STYLE="background-color:#E1E1E1;">zTPCopyEsc:
   {#CTRL -chars c}{#insert <A HREF="../devpex/debugging.html#kpspeed">zTSlp</A>}{#sleep 10}
zTPCopyTPKeys:
   Ctrl+C</PRE>


<PRE>

<HR/>

</PRE>
<A NAME="terminology"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TextPad-bootstraps: Terminology</H2>

<P>A &quot;<B>TextPad-bootstrap</B>&quot; is a built-in TextPad command that is critical to either the XKP or TPKC-project. The key-command assigned to a TextPad-bootstrap is called a <B>&quot;bootstrap key-command&quot;</B>. Any other key-commands assigned to a tp-bootstrap (or <I>any</I> key-command assigned to <I>any</I> other built-in TextPad command), are each called a &quot;<B>Non-BootStrap key-command</B>&quot; or &quot;Non-BootStrap kc&quot;, or <CODE>&quot;<B>nbs-kc</B>&quot;</CODE>.</P>

<P>A &quot;<B>Non-BootStrap command</B>&quot;, or &quot;<B>nbs-command</B>&quot;, is simply a command that is not a tp-bootstrap--whether or not it has a key-commands assigned to it. An &quot;<B>nbs-phrase</B>&quot; is a phrase that triggers a non-bootstrap command.</P>

<P>The &quot;<B>primary key-command</B>&quot; for a TextPad command is:<UL>
	<LI><B>if it is a tp-bootstrap:</B> The bootstrap-kc</LI>
	<LI><B>if it is not a tp-bootsrap:</B> nbs-kc number one.</LI>
</UL>If it has no kc-s (is not a bootstrap, and its nbs-kc count is zero), it has no primary-kc.</P>

<PRE>

<HR/>

</PRE>
<A NAME="promote"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; <I>For XBNPE-developers only:</I> Promoting an nbs-command to a tp-bootstrap</H2>

<P><I>(See: <A HREF="#locations">locations</A>)</I></P>

<P><OL>
	<LI>Remove that TextPad command from its current location (its current phrase-file), and place it into the <A HREF="tpbs_format.html#mainp">main</A> tp-bootstrap file for either the <A HREF="xkp.html">XKP</A> or <A HREF="tpkc/index.html">TPKC</A> project (<I>for <B>all</B> users in
	<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_tpkc}/textpad__tpkc/for_v_7_0_9/user_config/</CODE>
	<BR>!!!</I>).</LI>
	<LI>Create its corresponding &quot;non-main&quot; phrases (<CODE>&quot;<A HREF="tpbs_format.html#escp">Esc</A>&quot;</CODE> and <CODE>&quot;<A HREF="tpbs_format.html#tpkp">TPKeys</A>&quot;</CODE>)</LI>
	<LI>Add it to the regular expression for marking lines in the tp-all-cmd-list, in the tpbs section in XKP and TPKC.</LI>
	<LI>Change its raw global config from, for example:
	<BR> &nbsp; &nbsp; <CODE>BookmarkPrev	zTPBookmarkGTPrev	Srchmkprv	<B>__ES__</B>	100	{#insert zDOWN3}</CODE>
	<BR>to
	<BR> &nbsp; &nbsp; <CODE>BookmarkPrev	zTPBookmarkGTPrev	Srchmkprv	<B>yes</B>	100	{#insert zDOWN3}</CODE>
	<BR>and either<UL>
		<LI>Run the entire TPKC-build-process from  <A HREF="tpkc/sub_build_proc.html#02">sub-build-proc 02</A> through <A HREF="tpkc/sub_build_proc2.html#14">14</A>, </LI>
		<LI>or:<OL>
			<LI>Run TPKC-build-process 02.</LI>
			<LI>Update (for example)
			<BR> &nbsp; &nbsp; <CODE>zTpkcSrchmkprvIsBtstrp_yes</CODE>
			<BR>in
			<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_AG_tpkc}\cmd_cfg_global__bldprc06\search\search_BookmarkPrev.px.txt</CODE>
			<BR>from <I>nothing</I> (the empty-string) to &quot;<B>yes</B>&quot;.</LI>
			<LI>Import both
			<BR> &nbsp; &nbsp; <CODE>search_BookmarkPrev.px.txt</CODE>
			<BR>and the phrase-file output by build-proc-02.</LI>
		</OL></LI>
	</UL></LI>
	<LI>Add a test to the appropriate tp-bootstrap testing script (either
	<BR> &nbsp; &nbsp; <CODE>zTestAllXKPTextPadBootstraps</CODE>
	<BR>or
	<BR> &nbsp; &nbsp; <CODE>zTestAllTpkcTextPadBootstraps</CODE>
	<BR>). If this command was in the TPKC project, and is being moved to the XKP project, then its <A HREF="tpkc/user_menu.html#tpkcumac1ctest">TPKC-test</A> must be changed from <A HREF="tpkc/user_menu.html#tpkcumac1ctestnbs">Non-BootStrap</A> to <A HREF="tpkc/user_menu.html#tpkcumac1ctesttpbs">bootstrap</A>.</LI>
	<LI>Delete all TPKC-nbs phrase files (as output by build-proc-14). <I>(At the very least, delete these tp-bootstrap phrases from them, at least in PhraseExpress. <B>Not</B> deleting them will cause conflicts when running the tp-bootstrap test in the next step.)</I></LI>
	<LI>Import the new tp-bootstrap tests and run it!</LI>
	<LI>All tp-bootstraps, <I>regardless which project they are bootstraps for</I>, are listed in the TPKC ddmenu-file:
	<BR> &nbsp; &nbsp; <CODE>{#insert zXPROOT_DIR_tpkc}/textpad__tpkc/for_v_7_0_9/user_config/<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_ALL_cmds_pcddmenu.txt">tp_ALL_cmds_pcddmenu</A>.txt</CODE>
	<BR>(This is the <U>input</U> file for TPKC-build-proc-15.) If not there yet, add <CODE>&quot;[BS]&quot;</CODE> to its ddmenu-entry.</LI>
	<LI>Run TPKC-build-processes 10 through 14 (and, less critically, 15)--<I>for all users</I>.</LI>
	</OL></LI>
	<LI>Notify all users of this change and the steps they need to take. They're not going to like you very much.</LI>
	<LI>Change the number of tpbs-s documented at the bottom of <CODE><A HREF="tpkc/sub_build_proc.html#02">sub_build_proc.html#02</A></CODE>.</LI>
</OL></P>

<PRE>

<HR/>

</PRE>
<A NAME="charsnot"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; Commands in the &quot;Characters&quot; category may not be TextPad-bootstraps</H2>

<P>The &quot;Characters&quot; category is the only one in which commands do not have names. Instead, the &quot;name&quot; of each command is the character itself. This is unacceptable to the <A HREF="tpkc/index.html">TPKC-project</A>. The TPKC-build process (<A HREF="tpkc/sub_build_proc2.html#11">sub-build-proc-11</A>) therefore changes each to a <A HREF="../../textpad__tpkc/for_v_7_0_9/documentation_and_scripts/_char_category_cmd_name_alternatives.txt">specific name</A>**. For example, <CODE>'Ã'</CODE> is changed to <CODE>&quot;Char14AUpperTilde&quot;</CODE>. Since this translation does not occur until after the TPKC-project is installed <I>and built</I> (meaning all build processes from <A HREF="tpkc/sub_build_proc.html#02">02</A> through <A HREF="tpkc/sub_build_proc2.html#14">14</A> are successfully executed), no commands in this category may not be used as TextPad-bootstraps, until after all TPKC build processes have been successfully executed.</P>

<P>This restriction only applies to the XKP and TPKC projects.</P>

<P>**(see the bottom of <A HREF="tpkc/build_proc_tech_info2.html#creatergc_2catcfg">section two</A>, under <A HREF="tpkc/build_proc_tech_info2.html#bldrgc">TPKC-build: Before everything else: Manually creating the raw-global-configuration</A>, in the TPKC-build-process <A HREF="tpkc/build_proc_tech_info.html">technical documentation</A>)</P>

<P><IMG SRC="../images/basics/char_cat_in_tp_prefs.jpg" BORDER="1"/></P>


<PRE>




























</PRE>
</BODY></HTML>



