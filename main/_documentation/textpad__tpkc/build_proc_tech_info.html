<HTML><HEAD>
   <TITLE>XBNPE: TPKC build</TITLE>
	<meta name="viewport" content="width=device-width" />
</HEAD>

<BODY BGCOLOR="#FFFFFF" LINK="#0000FF" VLINK="#0000FF"><A NAME="top"></a>

<P>[<A HREF="index.html">BACK</A>]<CODE> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </CODE><I>(XBN-PhraseExpress is released under the <A HREF="../index.html#lpgl">LPGL 2.1</A>)</I>

<HR/>

<H1>RAW GLOBAL CONFIG CANNOT HAVE ANY EMPTY LINES!</H1>

<H1>XBN-PhraseExpress: TextPad built-in commands (TPKC-Project)</H1>
<H2>Building the TPKC-Project</H2>

<P><B>Contents:</B><UL>
	<LI>[<A HREF="../pex_in_textpad.html">go</A>]</CODE> &nbsp; <I>All TPKC build processes occur entirely in TextPad.</I></LI>
	<LI>[<A HREF="#bldrgc">go</A>]</CODE> &nbsp; Before everything else: Manually creating the raw-global-configuration</LI>
	<LI>[<A HREF="#bldprocs">go</A>]</CODE> &nbsp; The TPKC master and sub-build processes</LI>
	<LI>[<A HREF="#fullvraw">go</A>]</CODE> &nbsp; <B>Full versus RAW:</B> Phrases to execute one TPKC-build-process only</LI>
	<LI>[<A HREF="#livevtest">go</A>]</CODE> &nbsp; <B>Live versus test build:</B> Building the entire TPKC-Project, or only part, for testing and demonstration purposes</LI>
</UL></P>


<PRE>

<HR/>

</PRE>
<a name="bldprocs"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TPKC-Build: The master and sub-build processes</H2>

<P>There are four master processes, each calling a set of children (or &quot;sub&quot;) processes. This section specifically documents each processes input and output, as well as the process itself.</P>

<H3>Master processes</H3>

<P>The four master processes, the first two of which are executed only by the TPKC-admin, the second two by every TPKC-user:<OL>
	<LI>[<A HREF="#zTpkcMasterBuild1of4">go</A>]</CODE> &nbsp; <B><CODE>zTpkcMasterBuild1of4</CODE>:</B> Broadly speaking, this reads in the <A HREF="#bldrgc">raw-global configuration</A>, and generates the <A HREF="config_vars.html#cmdcfg">global-command-configuration</A></LI>
	<LI>[<A HREF="#zTpkcMasterBuild2of4">go</A>]</CODE> &nbsp; <B><CODE>zTpkcMasterBuild2of4</CODE>:</B> Verifies the imported global-command-config, and prepares for creating user-command-config.</LI>
	<LI>[<A HREF="#zTpkcMasterBuild3of4">go</A>]</CODE> &nbsp; <B><CODE>zTpkcMasterBuild3of4</CODE>:</B> Reads in the TextPad all-command list, and generates user-command-configuration.</LI>
	<LI>[<A HREF="#zTpkcMasterBuild4of4">go</A>]</CODE> &nbsp; <B><CODE>zTpkcMasterBuild4of4</CODE>:</B> Reads in user-command-config, and generates the Non-BootStrap (nbs) phrases, and the active-tp-command ddmenu.</LI>
</OL></P>

<P>After each process is complete, all output <I>phrases</I> must be imported to their appropriate locations in the PhraseExpress application. For example, the output of <A HREF="#zTpkc03CreateAll_allCmdsIn1CatPhrsFiles">build-process-03</A> is indicated in PhraseExpress by <CODE>'AG:03'</CODE> in its destination folder's description.</P>

<P><IMG SRC="linked_to_files/output_phrase_destination_example_ag3.jpg" BORDER="1"/></P>

<P>Note that processes <A HREF="#zTpkc07VerifyImportedGlobalCmdCfg">07</A>, <A HREF="#zTpkc10ElimBtstrpKCsFromTpAllCatLst">10</A>, <A HREF="#zTpkc11SplitNbsAllLstToIndvCatLsts">11</A>, and <A HREF="#zTpkc12CreateRawUsrCfgFromIndvCatLists">12</A> have no <I>importable</I> output (or no output at all).</P>

<P><I>An alternative method to triggering these build processes, is via <CODE>'<A HREF="../xbnpe_ddmenus.html#xh">xh</A>tkab'</CODE>.</I></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkcMasterBuild1of4"/><H2>[<A HREF="#bldprocs">BACK</A>]</CODE> &nbsp; TPKC-Build: <CODE>zTpkcMasterBuild1of4</CODE></H2>

<P><I>See below for two videos demonstrating preparing for, and then running this master-build-process 1-of-4.</I></P>

<P><CODE>'zTpkcMasterBuild1of4'</CODE> calls each of the following, in order:<UL>
	<LI><CODE>[<A HREF="#zTpkc01CreateSetCatlVarPhrsFile">go</A>]</CODE> &nbsp; <CODE>zTpkc01CreateSetCatlVarPhrsFile</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc02CreateTPBtstrpQblAndMrkRGCRegex">go</A>]</CODE> &nbsp; <CODE>zTpkc02CreateTPBtstrpQblAndMrkRGCRegex</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc03CreateAll_allCmdsIn1CatPhrsFiles">go</A>]</CODE> &nbsp; <CODE>zTpkc03CreateAll_allCmdsIn1CatPhrsFiles</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc03aCreate_AllCmdsAllCats_PhrsFile">go</A>]</CODE> &nbsp; <CODE>zTpkc03aCreate_AllCmdsAllCats_PhrsFile</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt">go</A>]</CODE> &nbsp; <CODE>zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc05CreateAll_callVPMForAllCmdsInCat_pFls">go</A>]</CODE> &nbsp; <CODE>zTpkc05CreateAll_callVPMForAllCmdsInCat_pFls</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc06CreateGlobalCommandConfigFromRaw">go</A>]</CODE> &nbsp; <B><CODE>zTpkc06CreateGlobalCommandConfigFromRaw</CODE></B></LI>
</UL>

<P>To open all output directories in Windows Explorer windows, use
<BR> &nbsp; &nbsp; <CODE>zzzTpkcBuld1of4OpenAllOutputDirs</CODE>
<BR>This is to make the importing of this processes output easier. This is automatically triggered (after confirming with you) at the end of the process.</P>

<H3>Preparing for a completely new build.</H3>

<P>Eliminating all old auto-generated files, to prepare for a new build. This also sets the build-mode to <A HREF="#livevtest">test</A>.</P>

<iframe width="420" height="315" src="http://www.youtube.com/embed/bJhGRHuNmrg" frameborder="0" allowfullscreen></iframe>

<H3>Running TPKC-build master-process 1of4 (in test mode)</H3>

<iframe width="420" height="315" src="http://www.youtube.com/embed/MURynk_FfL4" frameborder="0" allowfullscreen></iframe>

<PRE>

<HR/>

</PRE>
<a name="zTpkcMasterBuild2of4"/><H2>[<A HREF="#bldprocs">BACK</A>]</CODE> &nbsp; TPKC-Build: <CODE>zTpkcMasterBuild2of4</CODE></H2>


<P><CODE>'zTpkcMasterBuild2of4'</CODE> calls each of the following, in order:<UL>
	<LI><CODE>[<A HREF="#zTpkc07VerifyImportedGlobalCmdCfg">go</A>]</CODE> &nbsp; <B><CODE>zTpkc07VerifyImportedGlobalCmdCfg</CODE></B></LI>
	<LI><CODE>[<A HREF="#zTpkc08CreateSetAllKCsTo1CmdPhraseFiles">go</A>]</CODE> &nbsp; <CODE>zTpkc08CreateSetAllKCsTo1CmdPhraseFiles</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc09CreateAllSetCmd1VarPhraseFiles">go</A>]</CODE> &nbsp; <CODE>zTpkc09CreateAllSetCmd1VarPhraseFiles</CODE></LI>
</UL></P>

<P>To open all output directories in Windows Explorer windows, use
<BR> &nbsp; &nbsp; <CODE>zzzTpkcBuld2of4OpenAllOutputDirs</CODE></P>

<H3>Running TPKC-build master-process 2of4 (in <A HREF="#livevtest">test mode</A>)</H3>

<iframe width="480" height="360" src="http://www.youtube.com/embed/NePqea7XxM4" frameborder="0" allowfullscreen></iframe>
<PRE>

<HR/>

</PRE>
<a name="zTpkcMasterBuild3of4"/><H2>[<A HREF="#bldprocs">BACK</A>]</CODE> &nbsp; TPKC-Build: <CODE>zTpkcMasterBuild3of4</CODE></H2>
<P><CODE>'zTpkcMasterBuild3of4'</CODE> calls each of the following, in order:<UL>
	<LI><CODE>[<A HREF="#zTpkc10ElimBtstrpKCsFromTpAllCatLst">go</A>]</CODE> &nbsp; <CODE>zTpkc10ElimBtstrpKCsFromTpAllCatLst</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc11SplitNbsAllLstToIndvCatLsts">go</A>]</CODE> &nbsp; <CODE>zTpkc11SplitNbsAllLstToIndvCatLsts</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc12CreateRawUsrCfgFromIndvCatLists">go</A>]</CODE> &nbsp; <CODE>zTpkc12CreateRawUsrCfgFromIndvCatLists</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc13CreateUsrSpcfcCmdConfigFromRaw">go</A>]</CODE> &nbsp; <CODE>zTpkc13CreateUsrSpcfcCmdConfigFromRaw</CODE></LI>
</UL></P>


<P>To open all output directories in Windows Explorer windows, use
<BR> &nbsp; &nbsp; <CODE>zzzTpkc13OutroDlgMaybeOpenOutDir</CODE>
<BR>This is used instead of (the non-existant!)
<BR> &nbsp; &nbsp; <CODE>zzzTpkcBuld3of4OpenAllOutputDirs</CODE>
<BR>because the only <I>importable</I> output generated is by
<BR> &nbsp; &nbsp; <CODE>zTpkc13CreateUsrSpcfcCmdConfigFromRaw</CODE></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkcMasterBuild4of4"/><H2>[<A HREF="#bldprocs">BACK</A>]</CODE> &nbsp; TPKC-Build: <CODE>zTpkcMasterBuild4of4</CODE></H2>
<P><CODE>'zTpkcMasterBuild4of4'</CODE> calls the following, in order:<UL>
	<LI><CODE>[<A HREF="#zTpkc14CreateNbsPhrssAndWKcQBLsFrmUSCC">go</A>]</CODE> &nbsp; <CODE>zTpkc14CreateNbsPhrssAndWKcQBLsFrmUSCC</CODE></LI>
	<LI><CODE>[<A HREF="#zTpkc15CrtAllActvTPCmdsDDMenuFromAll">go</A>]</CODE> &nbsp; <CODE>zTpkc15CrtAllActvTPCmdsDDMenuFromAll</CODE></LI>
</UL></P>

<P>To open all output directories in Windows Explorer windows, use
<BR> &nbsp; &nbsp; <CODE>zzzTpkcBuld4of4OpenAllOutputDirs</CODE></P>





<PRE>

<HR/>

</PRE>
<a name="fullvraw"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; Full versus RAW: Phrases to execute one TPKC-build-process only</H2>

<H3>Full</H3>

<P>Each build sub-process (01 through 15) is executed by its master. For example, sub-build <CODE>'<A HREF="#zTpkc02CreateTPBtstrpQblAndMrkRGCRegex">02</A>'</CODE> is executed by the <CODE>'<A HREF="#zTpkcMasterBuild1of4">1of4</A>'</CODE> master process. A <B>Full Run</B> of a sub-process goes through its entire setup (its &quot;exclusive&quot; setup), in order to ensure that it will run properly. For example:<UL>
	<LI>Confirm output files do not exist (you are prompted to delete them)</LI>
	<LI>Confirm input files <I>do</I> exist.</LI>
	<LI>Other warnings and checks specific to the sub-process.</LI>
</UL>Each master process runs the &quot;exclusive&quot; setup for all its child- (sub-)processes before executing them in order.</P>

<H3>RAW</H3>

<P>Each sub-build also has a &quot;RAW&quot; process, which is the &quot;core&quot; of its functionality. Specifically, it is the part that executes after all setup is complete. This is useful for testing and diagnostics only.</P>

<PRE>

<HR/>

</PRE>
<a name="livevtest"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; Live versus test build: Building the entire TPKC-Project, or only part, for testing and demonstration purposes</H2>

<P>Normally, the above processes build the TPKC-Project for all categories, as defined by
<BR> &nbsp; &nbsp; <B>-<CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>:</B>
<BR> &nbsp; &nbsp; <CODE>{#insert zTpkcAllCategoryAbrvLCsQbl}</CODE>
<BR>For demonstration or diagnostic purposes, they may instead be run on a sub-set of these categories. When this is desired, set
<BR> &nbsp; &nbsp; <CODE>zTpkcAllCategoryAbrvLCsQbl_FORTESTMODE</CODE>
<BR>to <I>an exact subset</I> of <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>, and then turn the test-category flag on, by setting
<BR> &nbsp; &nbsp; <CODE>zTpkcBuildModeTestOrLive</CODE>
<BR>to <CODE>'test'</CODE>. When set to <CODE>'live'</CODE>, then all categories are built.</P>

<H3>WARNING</H3>

<P><I>Building the TPKC-Project in 'test' mode is <B>permanent</B>. Once test-mode is set, it cannot be changed unless the <B>entire</B> tpkc project is rebuilt, starting at sub-proc-01.</I></P>

<H3>Good test build <CODE>[file][config][help]</CODE></H3>

<P>Good for demonstrating the build-process, and for documentation videos. <CODE>&quot;file&quot;</CODE> is a moderately-large category and contains a bootstrap. <CODE>&quot;config&quot;</CODE> contains a bootsrap and has few commands, and <CODE>&quot;help&quot;</CODE> has no kcs at all (in my setup anyway), and has few commands.</P>

<H3>Specifics</H3>

<P>The master-configuration-variable
<BR> &nbsp; &nbsp; <CODE>zTpkcAllCategoryAbrvLCsQbl_FORTESTMODE</CODE>
<BR>is the 'test mode' category list, used only when
<BR> &nbsp; &nbsp; <CODE>zTpkcBuildModeTestOrLive</CODE>
<BR>is <CODE>'test'</CODE>. When <CODE>'live'</CODE>, then
<BR> &nbsp; &nbsp; <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>
<BR>is used.</P>

<P>As stated above, <CODE>zTpkcAllCategoryAbrvLCsQbl_FORTESTMODE</CODE> must be an <I>exact subset</I> of <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>. For example, if <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE> is
<BR> &nbsp; &nbsp; <CODE>[chars][cliplib][config][cursor][edit][file][help][macros][search][sel][tools][view][window]</CODE>
<BR>then an example legal value for <CODE>zTpkcAllCategoryAbrvLCsQbl_FORTESTMODE</CODE> is
<BR> &nbsp; &nbsp; <CODE>[file][tools][view][window]</CODE></P>

<P>It may never be empty.</P>

<P><I>This test-category flag will work for any individual process, as well as for the overall build process.</I></P>
<P>What I personally do when executing a test-build:<OL>
	<LI>On disk, zip and backup the entire auto-generated directory
	<BR> &nbsp; &nbsp; <B>-<CODE>zzXPSUB_DIR_tpNonMacroKeyCmds</CODE>:</B>
	<BR> &nbsp; &nbsp; <CODE>{#insert zzXPSUB_DIR_tpNonMacroKeyCmds}</CODE>
	<BR>(name it something like <CODE>'tpkc_full_build_ag_dir__20130605.zip'</CODE>)</LI>
	<LI>In PhraseExpress, duplicate the entire TPKC directory
	<BR> &nbsp; &nbsp; <CODE>XBN-PhraseExpress/XBNPE: TextPad Built-in commands (TPKC)</CODE>
	<BR>(select the folder and type Ctrl+D), delete ALL auto-generated files in the duplicate, and disable the original branch (select-then-right-click the folder, and uncheck 'Activate autotext/hotkeys'). <I>Unfortunately, all folders will be out of order (should you choose to keep it, you'll need to manually sort each one, via right-click, <CODE>sort &gt; By description &gt; A-Z</CODE>)</I></LI>
	<LI>When the test is complete, delete the test folder/directory, and recover the original branches.</LI>
</OL></P>

<PRE>

<HR/>

</PRE>
<a name="bldrgc"/><H2><CODE>[<A HREF="#top">top</A>]</CODE> &nbsp; TPKC-build: Before everything else: Manually creating the raw-global-configuration</H2>

<P><UL>
	<LI><B>File:</B> <I>None</I></LI>
	<LI><B>Input:</B> Each category's command list.</LI>
	<LI><B>Output:</B> <CODE>zzXPSUB_DIR_tpkcRawCfgGlobal\[cat-abrv].txt</CODE></LI>
</UL></P>

<P>Before the TPKC project can be built, its &quot;Raw Global Command Configuration&quot; (or &quot;raw-global-config&quot;) must be created. This is a largely manual process--very little of it is automated. However, it is only necessary to do this <I>entire</I> process once. When a new version of TextPad is released, if it eliminates, adds, renames, or fundamentally changes any built-in command, these output files must be updated to reflect it--and then the TPKC project must be re-built.</P>

<P>The raw-global-config is stored in <CODE>zzXPSUB_DIR_tpkcRawCfgGlobal</CODE></P>

<P>This section documents the creation of the raw-global-config from <I>nothing</I>--as if it never existed.</P>

<P><B>Steps, in order:</B><OL>
	<LI><CODE>[<A HREF="#creatergc_1ovrcfg">go</A>]</CODE> Update the all-category-qbl</LI>
	<LI><CODE>[<A HREF="#creatergc_2catcfg">go</A>]</CODE> Update category configuration</LI>
	<LI><CODE>[<A HREF="#creatergc_3rawglblcfg">go</A>]</CODE> Create the raw-global-config</LI>
</OL></P>

<PRE>

<HR/>

</PRE>
<a name="creatergc_1ovrcfg"/><H3>Step 1: Update the all-category-qbl</H3>

<P>Update the all-category-qbl
<BR> &nbsp; &nbsp; <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>
<BR>to reflect the new category-list.</P>

<PRE>

<HR/>

</PRE>
<a name="creatergc_2catcfg"/><H3>Update category configuration</H3>

<P>Update the <A HREF="config_vars.html#catcfg">category configuration</A>, to reflect the values in the all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>). The command-list for each category can be retrieved via
<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Preferences &gt; Keyboard &gt; [one-category] &gt; [List-button]</CODE>
<BR>and using only the values in the first column. Get the first column values by turning word-wrap off, checking
<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Configure &gt; Block Select Mode</CODE>
<BR>and then selecting the column with the mouse. Alternatively, use this regex replacement:<UL>
	<LI><B>Find what:</B> <CODE>^([^ ]+) .+$</CODE></LI>
	<LI><B>Replace with:</B> <CODE>$1</CODE></LI>
</UL></P>

<P><I>To prepare for the next step (creating the raw-global-config), save this command-name column into
<BR> &nbsp; &nbsp; <CODE>zzXPSUB_DIR_tpkcRawCfgGlobal\[cat-abrv].px.txt</CODE>
<BR>where <CODE>[cat-abrv]</CODE> is as defined in the all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>), </I></P>

<P>Now close the document and continue with that same text remaining in the clipboard.</P>

<H4><U>Creating the category's command list: <CODE><A HREF="config_vars.html#AllCmdsQbl">zTpkc[cat-abrv]AllCmdsQbl</A></CODE></U></H4>

<P>In the category-confg file
<BR> &nbsp; &nbsp; <B>-<CODE>zzXPSUB_DIR_tpkcConfigCategory\[cat-abrv].px.txt</CODE></B>
<BR>replace the value of
<BR> &nbsp; &nbsp; <CODE>zTpkc[cat-abrv]AllCmdsQbl</CODE>
<BR>with the list currently in the clipboard. To transform this column of command names in to a Square-Bracketed List (qb-list) as expected, select the column and then use these two regex replacements:<OL>
	<LI>Surround each with square brackets:<UL>
			<LI><B>Find what:</B> <CODE>^(.+)$</CODE></LI>
			<LI><B>Replace with:</B> <CODE>[$1]</CODE></LI>
	</UL></LI>
	<LI>Eliminate all new-lines:<UL>
			<LI><B>Find what:</B> <CODE>\n</CODE></LI>
			<LI><B>Replace with:</B> <I>nothing</I></LI>
	</UL></LI>
</OL></P>

<a name="charcatcmdnameexception"/><H4><U>Command-name exception for 'Characters' category</U></H4>

<P>The command names for the Characters category, as assigned by TextPad
<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Preferences &gt; Keyboard &gt; Category=Characters &gt; Commands</CODE>
<BR>Are not appropriate for the TPKC project. This is the only category in which this is an issue. Instead, as of version 7.0.9, use <A HREF="../../textpad__tpkc/for_v_7_0_9/documentation_and_scripts/_char_category_cmd_name_alternatives.txt">these alternatives</A>.</P>

<P>Note each name starts with <CODE>'Char##'</CODE> (zero-padded for numbers less than ten), to ensure the ordering is exactly the same as the original list.</P>







<PRE>

<HR/>

</PRE>
<a name="creatergc_3rawglblcfg"/><H3>Create the raw-global-configuration</H3>

<P>In the previous step, you duplicated the command-name column to
<BR> &nbsp; &nbsp; <CODE>zzXPSUB_DIR_tpkcRawCfgGlobal\[cat-abrv].px.txt</CODE>
<BR>After this final step, these files become the raw-global-config.</P>

<P>For example (assuming TextPad version 7.0.9), here are the first five lines from
<BR> &nbsp; &nbsp; <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}file.txt</CODE></P>

<PRE>FileClose
FileCloseAll
FileExit
FileGoTo
FileManage</PRE>

<P>This needs to be transformed to the following:</P>

<PRE>FileClose	zTPFileClose	Fcls	yes	50	(*NOTHING! No steps! This command is the top-most command in the list.*)
FileCloseAll	zTPFileCloseAll	Fclsa	{#insert zzEmptyStringMarker}	50	\\\{#DOWN\\\}\\\{#insert z5ThnTSlp\\\}
FileExit	zTPFileExit	Fxit	{#insert zzEmptyStringMarker}	{#insert zzEmptyStringMarker}	\\\{#DOWN -count 2\\\}\\\{#insert z5ThnTSlp\\\}
FileGoTo	zTPFileOpenSelPath	Fgoto	{#insert zzEmptyStringMarker}	100	\\\{#DOWN -count 3\\\}\\\{#insert z5ThnTSlp\\\}
FileManage	zTPFileManager	Fmngr	{#insert zzEmptyStringMarker}	50	\\\{#PGDN\\\}\\\{#insert z5ThnTSlp\\\}\\\{#UP -count 2\\\}\\\{#insert z5ThnTSlp\\\}</PRE>

<P>Columns:<OL>
	<LI>Command name</LI>
	<LI>The default phrase name. This will be assigned to the <A HREF="config_vars.html#cmdcfg">command-configuration</A> variable
	<BR> &nbsp; &nbsp; <CODE><A HREF="config_vars.html#DfltPhrsNm">zTpkc[abrv]DfltPhrsNm</A></CODE></LI>
	<LI>The command abbreviation:
	<BR> &nbsp; &nbsp; <CODE><A HREF="config_vars.html#Abrv1C">zTpkc[abrv]Abrv1C</A></CODE></LI>
	<LI>Is this a bootstrap command/does this command have a bootstrap key-command? If yes, <CODE>'yes'</CODE>, otherwise <CODE>''</CODE>.
	<BR> &nbsp; &nbsp; <CODE><A HREF="config_vars.html#IsBtstrp_yes">zTpkc[abrv]IsBtstrp_yes</A></CODE></LI>
	<LI>The specific navigational steps, from the top of its command-list
	<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Preferences &gt; Keyboard &gt; [Category name] &gt; Commands</CODE>
	<BR>to <I>this</I> command. If this command <I>is</I> the top command, then this should be a comment saying so (empty-string is not allowed). Note that each step is a raw PhraseExpress function-call (and not its XBN-PhraseExpress alternative, such as \\\{#insert zDOWN\\\}), and each step is followed by a call to <CODE>z5ThnTSlp</CODE>.
	<BR> &nbsp; &nbsp; <CODE><A HREF="config_vars.html#StpsFrmLstTop">zTpkc[abrv]StpsFrmLstTop</A></CODE></LI>
</OL></P>

<H4><U>Notes on determining the values of each column</U></H4>

<P><OL>
	<LI><B>Default phrase name:</B> At first, simply consider making this equal to
	<BR> &nbsp; &nbsp; <CODE>zTP[command-name]</CODE>
	<BR>the tailor as necessary.</LI>
	<LI><B>The command abbreviation:</B> You'll need to manually and individually decide on each abbreviation.</LI>
	<LI><B>Is this a bootstrap command?</B> Default to empty-string, then tailor as necessary.</LI>
</OL></P>

<P><B>Determining the go-to-command-from-list-top steps.</B></P>

<P><OL>
	<LI>In each raw-config document, with word-wrap off and
	<BR> &nbsp; &nbsp; <CODE>Textpad &gt; Configure &gt; Block select mode</CODE>
	<BR>on (checked), copy the first column (the command names) from each document, and paste them all into a SINGLE document. Use
	<BR> &nbsp; &nbsp; <CODE>TextPad &gt; Configure &gt; Block Select Mode</CODE>
	<BR>to put them all into <A HREF="linked_to_files/all_commands_for_writing_from_cmd_list_top_steps.txt">two columns</A> (it looks much cleaner when viewed in TextPad).</LI>
	<LI>ALSO use these first-column texts to create each of the <CODE>[zTpkc*AllCmdsQbl]</CODE> (and its corresponding <CODE>[zTpkc*CmdCount]</CODE>) variables in <CODE>[zzXPSUB_DIR_tpkcConfigCategory]</CODE></LI>
	Print out this document and use it to determine the go-to-command-from-Commands-list-top, as demonstrated in
	<BR> &nbsp; &nbsp; <CODE><A HREF="linked_to_files/all_tp_cmd_names_in_2_cols_to_help_determine_from_lst_top_steps.pdf">all_tp_cmd_names_in_2_cols_to_help_determine_from_lst_top_steps.pdf</A></CODE>
	<BR>Once all the <CODE>HOME</CODE>, <CODE>END</CODE>, <CODE>PGUP#</CODE>, and <CODE>PGDN#</CODE>-s are determined, the rest are simply an <CODE>UP#</CODE>-or-<CODE>DOWN#</CODE> away from that original <CODE>HOME</CODE> (or <CODE>END</CODE>, or <CODE>PGUP#</CODE>, or <CODE>PGDN#</CODE>). Use empty-lines and bookmarks to make this easier, as demonstrated here:
	<P><IMG SRC="linked_to_files/assinging_each_cmd_to_gt_steps_from_list_top_starting_point.JPG"/></P>
	<LI>Using both
	<BR> &nbsp; &nbsp; <CODE>[zXPROOT_DIR_tpkcRawCfgGlobal][category-abrv].px.txt</CODE>
	<BR>and the concepts in this <A HREF="linked_to_files/all_tp_cmd_names_in_2_cols_to_help_determine_from_lst_top_steps.pdf">pdf</A>, write the go-to-cmd-from-list-top phrases. in the <I>last</I> column (in place of the &quot;<CODE>X<!---->XX</CODE>&quot;-s). Use raw PhraseExpress function calls and follow each with <CODE>[z5ThnSlp]</CODE>. For example:
	<BR> &nbsp; &nbsp; <CODE>\\\{#PGDN -count 3\\\}\\\{#insert z5ThnSlp\\\}\\\{#UP\\\}\\\{#insert z5ThnSlp\\\}</CODE></LI>
	<LI>This is now considered the TPKC's &quot;raw global configuration&quot;. It needs to be processed by
	<BR> &nbsp; &nbsp; <CODE>zTpkcCreateAllGlblCmdCfgFilesForAllCats</CODE></LI>
</OL></P>

<P><B>For categories where every command name starts with the same letter</B> (such as Edit and Window), the commands <CODE>END</CODE>, <CODE>PGDN</CODE>, and <CODE>PGUP</CODE> will be the basis. For example, to get to <CODE>EditCutLine</CODE>, use these steps:
<BR> &nbsp; &nbsp; <CODE>\\\{#PGDN -count 3\\\}\\\{#insert z5ThnSlp\\\}\\\{#DOWN\\\}\\\{#insert z5ThnSlp\\\}</CODE></P>

<P>For categories with commands having multiple starting characters (such as Search, Configure, and Cursor), the first character can be used in its place. For example, to get to <CODE>MatchBracketExtend</CODE>, use these steps:
<BR> &nbsp; &nbsp; <CODE>m\\\{#insert z5ThnSlp\\\}\\\{#DOWN\\\}\\\{#insert z5ThnSlp\\\}</CODE></P>


<PRE>

<HR/>

</PRE>
<a name="zTpkc01CreateSetCatlVarPhrsFile"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc01CreateSetCatlVarPhrsFile</CODE></H2>

<P>Takes all category abbrevations, from the all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>),
<BR>and for each category, creates this phrase:
<BR> &nbsp; &nbsp; <B>-<CODE>zvCAT_ABRV_LC_st[cat-abrv]</CODE>:</B>
<BR> &nbsp; &nbsp; <CODE>\\\{#SETPHRASE -description zvCAT_ABRV_LC -content [cat-abrv] -autotext zvCAT_ABRV_LC -folder ctvv_folder\\\}</CODE></P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\01_create_all_set_catl_vars_phrs_file.px.txt</CODE></LI>
	<LI><B>Input:</B> <A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc01_outDirPNm}\{#insert zzzTpkc01_outFNm}</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/Other</CODE></LI>
	</UL></LI>
</UL></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc02CreateTPBtstrpQblAndMrkRGCRegex"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc02CreateTPBtstrpQblAndMrkRGCRegex</CODE></H2>

<P>For the TPKC-user, the first step in the build process is to eliminate bootstrap key-commands from the tp-all-command-list. This is done by <CODE><A HREF="#zTpkc10ElimBtstrpKCsFromTpAllCatLst">zTpkc10ElimBtstrpKCsFromTpAllCatLst</A></CODE>. In order to do this, the TextPad-bootstrap phrases, <I>as configured by the user</I>, must be deemed trustworthy. This build-process (02) creates two phrases required by build-process-10.</P>

<I>(Continues below.)</I>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\02_create_btstrp_qbl_and_mrk_lns_regex.px.txt</CODE></LI>
	<LI><B>Input:</B> The raw-global-config files:
	<BR> &nbsp; &nbsp; <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}\[cat-abrv].txt</CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc02_outDirPNm}\{#insert zzzTpkc02_outFNm}</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/Build/_Auto-generated</CODE></LI>
	</UL></LI>
</UL></P>

<P>The first is a sQuare-Bracketed List (qbl, see 'xhskq'), containing all command-abbreviations <I>as they exist in the raw-global-configuration</I>. The raw-global-config has trustworthy data, and is therefore used to independently verify the user's bootstraps. (This is also used by <A HREF="#zTpkc15CrtAllActvTPCmdsDDMenuFromAll">process-15</A>).</P>

<P>Example bootstrap raw-global-config line:
<BR> &nbsp; &nbsp; <CODE>EditCopyTaggedLines	zTPBookmarkCopyAll	Ecpbkmlns	__ES__	yes	25	\\\{#PGDN -count 2\\\}\\\{#insert z5ThnTSlp\\\}\\\{#DOWN -count 2\\\}\\\{#insert z5ThnTSlp\\\}</CODE></P>

<P>The second phrase created by build-02, is a regular expression that marks all bootstrap lines, as they exist in the tp-all-cmd-list at once. Specifically, it is an alternation containing the full TextPad built-in command-name of each TextPad-bootstrap, anchored between line-start and a word-boundary. For example
<BR> &nbsp; &nbsp; <CODE>^(CmdName1|CmdName2|CmdName3|CmdName4|CmdName5|CmdName6|...)\b</CODE>
<BR><I>As of 8/15/2013, there are only twenty <A HREF="../pex_in_textpad.html#tpbs">TextPad-bootstraps</A>, so the length of this regex is not a concern. I actually tested it with a many-times-longer regex, and it worked.</I></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc03CreateAll_allCmdsIn1CatPhrsFiles"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc03CreateAll_allCmdsIn1CatPhrsFiles</CODE></H2>

<P>Creates the phrases directly-accessible to the user, via the drop-down menu, to execute something against <I>all commands in a single category</I>.</P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\03_create_all_all_cmds_in_1_cat_phrase_files.px.txt</CODE></LI>
	<LI><B>Input:</B> The all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>).</LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc03_outDirPNm}\[cat-abrv].px.txt</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/Other/TextPad built-in commands/All cmds in 1 cat</CODE></LI>
	</UL></LI>
</UL></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc03aCreate_AllCmdsAllCats_PhrsFile"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc03aCreate_AllCmdsAllCats_PhrsFile</CODE></H2>

<P>Creates the phrases to execute against all-commands-in-all-categories.</P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\03a_create_all_cmds_in_all_cats_phrase_file.px.txt</CODE></LI>
	<LI><B>Input:</B> <CODE>{#insert zzzTpkc03a_inDirPNm}\{#insert zzzTpkc03a_inFNm}</CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc03a_outDirPNm}\{#insert zzzTpkc03a_outFNm}</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases &gt; Other &gt; TextPad built-in commands [DDMENU] &gt; All cmds in all cats</CODE></LI>
	</UL></LI>
</UL></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt</CODE></H2>

<P>Creates a single phrase, named <B><CODE>zzTpkcCallPhrsNmForEachCat_M_catpm</CODE></B>, that, for every category in the TPKC-Project:<OL>
	<LI>Sets its abbrevation to <CODE>zvCAT_ABRV_LC</CODE>, and then</LI>
	<LI>executes the phrase whose <I>name</I> is in the variable <CODE>zvPNM_FOR_CAT</CODE>.</LI>
</OL></P>

<I>(Continues below.)</I>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\04_create_all_call_vpm_for_each_cat_and_all_cat_cnt_phrs_file.px.txt</CODE></LI>
	<LI><B>Input:</B> The all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>).</LI>
	<LI><B>Output:</B> <CODE>{#insert zzzTpkc04_outDirPNm}\{#insert zzzTpkc04_outFNm}</CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc03_outDirPNm}\[cat-abrv].px.txt</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B> <CODE>All other TPKC-Project phrases/Other</CODE></LI>
	</UL></LI>
</UL></P>

<P>Iterating through the actual-or-test all-cat-list qbl, as in</P>

<PRE>\\\{#insert zvQB_STR_LIST_stAllTpkcCatsOrForTestModeFcsTP\\\}\\\{#LOOP \\\{#insert zzzWrtNxtCallPNmInVarFor1Cat_catqbl\\\} -count \\\{#insert zzTpkcCategoryCountForLiveOrTestMode\\\}\\\}</PRE>

is required in all build processes zTpkc06CreateGlobalCommandConfigFromRaw 06 and before. Iterating through a qbl is slow.

After process 6, once all output is imported--both in the remaining build processes, AND in any user-facing processes--use this alternative:

<PRE>\\\{#SETPHRASE -description zvPNM_FOR_CAT -content zzzTpkcCrtNextStCmd1VarPhrsFile_M_catqbl -autotext zvPNM_FOR_CAT -folder ctvv_folder\\\}\\\{#insert zzTpkcCallPhrsNmForEachCat_M_catpm\\\}</PRE>

Both methods anticipate the TPKC-test-mode-flag, including notifying the user, but the second method is much faster, and has the additional benefit of *not* depending on the TPKC-test-mode-flag (zTpkcBuildModeTestOrLive), which, while being critical during build processes zTpkc01CreateSetCatlVarPhrsFile 01-through-06, is unused at all other times.


<PRE>

<HR/>

</PRE>
<a name="zTpkc05CreateAll_callVPMForAllCmdsInCat_pFls"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc05CreateAll_callVPMForAllCmdsInCat_pFls</CODE></H2>

<P>Creates a phrase similar to that created by <CODE><A HREF="#zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt">zTpkc04CreatePhrsFl_callVPMForEachCatAndAllCatCnt</A></CODE>, except this works for all commands in a single category.</P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\05_create_all_call_vpnm_for_each_cmd_in_cat_phrs_fl.px.txt</CODE></LI>
	<LI><B>Input:</B> The all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>), and all raw-global-configuration files: <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}</CODE>.</LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc05_outDirPNm}\[cat-abrv].px.txt</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/Other/Call VPM for cmd in each cat</CODE></LI>
	</UL></LI>
</UL></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc06CreateGlobalCommandConfigFromRaw"/><H2>[<A HREF="#zTpkcMasterBuild1of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (1/4): <CODE>zTpkc06CreateGlobalCommandConfigFromRaw</CODE></H2>

<P>Transforms raw-global-config lines, such as</P>

<PRE STYLE="background-color:#EEEEEE;">EditCopy	zTPCopy	Ecp	__ES__	yes	10	\\\{#PGDN\\\}\\\{#insert z5ThnTSlp\\\}\\\{#DOWN\\\}\\\{#insert z5ThnTSlp\\\}
EditCopyAppend	zTPCopyAppend	Ecpapp	__ES__	__ES__	10	\\\{#PGDN\\\}\\\{#insert z5ThnTSlp\\\}\\\{#DOWN -count 3\\\}\\\{#insert z5ThnTSlp\\\}</PRE>
<P>into these two global-command configuration phrase-files:</P>



<P><TABLE ALIGN="center" BORDER="1" CELLSPACING="0" CELLPADDING="4" BGCOLOR="#FFFFFF"><TR ALIGN="left" VALIGN="middle">
	<TD><H4><U><CENTER>edit_EditCopy.px.txt</CENTER></U></H4>
<PRE STYLE="background-color:#EEEEEE;">
<B><U>zTpkcEditCopyAbrv1C</U></B>
   Ecp
<B><U>zTpkcEcpCmdNameTC</U></B>
   EditCopy
<B><U>zTpkcEcpDfltPhrsNm</U></B>
   zTPCopy
<B><U>zTpkcEcpCatForCmdAbrvLC</U></B>
   edit
<B><U>zTpkcEcpCmdType_mcrTl</U></B>
   <I>nothing</I>
<B><U>zTpkcEcpIsBtstrp_yes</U></B>
   yes
<B><U>zTpkcEcpDfltPostKcSlpMils</U></B>
   25
<B><U>zTpkcEcpStpsFrmCmdListTop</U></B>
   {#insert zPGDN}{#insert zDOWN}</PRE></TD>
	<TD><H4><U><CENTER>edit_EditCopyAppend.px.txt</CENTER></U></H4>
<PRE STYLE="background-color:#EEEEEE;">
<B><U>zTpkcEditCopyAppendAbrv1C</U></B>
   Ecpapp
<B><U>zTpkcEcpappCmdNameTC</U></B>
   EditCopyAppend
<B><U>zTpkcEcpappDfltPhrsNm</U></B>
   zTPCopyAppend
<B><U>zTpkcEcpappCatForCmdAbrvLC</U></B>
   edit
<B><U>zTpkcEcpappCmdType_mcrTl</U></B>
   <I>nothing</I>
<B><U>zTpkcEcpappIsBtstrp_yes</U></B>
   <I>nothing</I>
<B><U>zTpkcEcpappDfltPostKcSlpMils</U></B>
   50
<B><U>zTpkcEcpappStpsFrmCmdListTop</U></B>
   {#insert zPGDN}{#insert zDOWN3}</PRE></TD>
</TR></TABLE></P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_1of4__glbl_cmd_cfg_frm_raw\06_create_global_cmd_cfg_from_raw.px.txt</CODE></LI>
	<LI><B>Input:</B> The all-category-qbl (<A HREF="config_vars.html#zTpkcAllCategoryAbrvLCsQbl"><CODE>zTpkcAllCategoryAbrvLCsQbl</CODE></A>), and all raw-global-configuration files: <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}</CODE>.</LI>
	<LI><B>Output:</B> <I><A HREF="config_vars.html#locationsuscc">Documented elsewhere</A></I></LI>
</UL></P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc07VerifyImportedGlobalCmdCfg"/><H2>[<A HREF="#zTpkcMasterBuild2of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (2/4): <CODE>zTpkc07VerifyImportedGlobalCmdCfg</CODE></H2>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_2of4__vrfy_gbl_prep_for_usr_cfg\07_verify_imported_global_cmd_cfg.px.txt</CODE></LI>
	<LI><B>Input:</B><UL>
		<LI><B>On disk:</B> <CODE><I></I>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}</CODE></LI>
		Global comand configuration, as imported into PhraseExpress
	</UL></LI>
	<LI><B>Output:</B> <I>none</I></LI>
</UL></P>

<P>Verifies that all global command configuration phrases were successfully imported into PhraseExpress. This reads in the raw-global-config files, similarly to <A HREF="#zTpkc06CreateGlobalCommandConfigFromRaw">build process 06</A>. For each read-in item, it checks to see that its phrase exists, and equals the read-in string. Note that this checks all items <I>except</I> the from-list-top steps (since there's no way to read in the code (the UN-escaped) versions of those steps, in order to compare them).</P>

<P>This process has no output, beyond informing you, the person running and monitoring this build process. Improperly-imported commands are logged into  a separate file.</P>

<P>The reason for this check is because importing hundreds of phrase text-files is a fragile process. It is not unusual for at least a few of the imports to become corrupted.</P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc08CreateSetAllKCsTo1CmdPhraseFiles"/><H2>[<A HREF="#zTpkcMasterBuild2of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (2/4): <CODE>zTpkc08CreateSetAllKCsTo1CmdPhraseFiles</CODE></H2>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_2of4__vrfy_gbl_prep_for_usr_cfg\08_create_all_set_all_kcs_to_1_cmd_phrs_fls.px.txt</CODE></LI>
	<LI><B>Input:</B> Raw-global-config: <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}</CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc08_outDirPNm}\{#insert zzzTpkc08_outFNm}</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/TextPad built-in commands/Assign all KCs to 1 cmd</CODE></LI>
	</UL></LI>
</UL></P>

<P>Creates single phrase for every command, to assign all key-commands (both bootstrap and non) to it.</P>
<PRE>

<HR/>

</PRE>
<a name="zTpkc09CreateAllSetCmd1VarPhraseFiles"/><H2>[<A HREF="#zTpkcMasterBuild2of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (2/4): <CODE>zTpkc09CreateAllSetCmd1VarPhraseFiles</CODE></H2>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_2of4__vrfy_gbl_prep_for_usr_cfg\09_create_all_set_cmd1_vars_phrase_files.px.txt</CODE></LI>
	<LI><B>Input:</B> Raw-global-config: <CODE>{#insert zzXPSUB_DIR_tpkcRawCfgGlobal}</CODE></LI>
	<LI><B>Output:</B> <CODE>{#insert zzzTpkc09_outDirPNm}\{#insert zzzTpkc09_outDirPNm}</CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc09_outDirPNm}\{#insert zzzTpkc09_outDirPNm}</CODE></LI>
		<LI><B>Import phrases into PhraseExpress TPKC folder:</B>
		<BR> &nbsp; &nbsp; <CODE>All other TPKC-Project phrases/Other/Set cmd1 var to 1 cmd</CODE></LI>
	</UL></LI>
</UL></P>

<P>Creates all the <CODE>'zvCMD_ABRV_1C_st...'</CODE> phrases, which are used by <I>most</I> user-facing phrases in the TPKC-Project</P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc10ElimBtstrpKCsFromTpAllCatLst"/><H2>[<A HREF="#zTpkcMasterBuild3of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (3/4): <CODE>zTpkc10ElimBtstrpKCsFromTpAllCatLst</CODE></H2>


<P><UL>
	<LI><B>Process:</B><UL>
		<LI><U>File</U>: <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_3of4__usr_cfg_frm_all_cmd_list\10_eliminate_nbs_kcs_from_tp_all_cat_list.px.txt</CODE></LI>
	</UL></LI>
	<LI><B>Input:</B> The <A HREF="index.html#tpacl">TextPad all-command-list</A></LI>
	<LI><B>Output:</B><UL>
		<LI><U>On disk</U> <I>(the <A HREF="../plain_text_phrase_files.html#fformat">plain-text phrase-file</A>)</I>
		<BR> &nbsp; &nbsp; <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum">zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum</A>}/output/usr_spcfc_cfg__bldproc10thr13/_tp_all_cmd_list__nbs_only__bldprc10.txt<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/output/usr_spcfc_cfg__bldproc10thr13/_tp_all_cmd_list__nbs_only__bldprc10.txt">_tp_all_cmd_list__nbs_only__bldprc10.txt</A></CODE></LI>
		<LI>PhraseExpress import-folder: <I>Not-applicable</I></LI>
		</UL></LI>
</UL></P>

<P>Takes the &quot;TextPad All-Commands list&quot; and eliminates all bootstrap key-commands from it. This prevents multiple phrases calling triggering the same key-command.</P>

<P><I>(Note that this build-process requires the command-abrv-qbl and mark-all-bootstrap-commands regex, as created by <A HREF="#zTpkc02CreateTPBtstrpQblAndMrkRGCRegex">build-process 02</A>.)</I></P>

<H3>All TextPad-bootstrap kc report</H3>

<P>Because this depends on user-configured phrases, they must be verified. There is an optional report printed by this build-process, displaying all versions (escaped, TextPad-keys, and the line in the tp-all-cmd-list--note the actual version cannot be analyzed, because attempting to read it will actually execute the key-command). This may optionally be printed before the deletion process starts. It is also printed if any error is discovered during the deletion process.</P>

<P>Note that if the report detects any erros, it will abort the process.</P>

<P>The report takes a good five-to-seven seconds per command.</P>

<H3>Actually deleting the bootstrap key-commands</H3>

<P>After the optional report is printed, key-commands are actually deleted. On the first potential error, the process aborts, and the full report is printed.</P>

<P>Otherwise, all bootstrap key-commands are successfully deleted, and the output is saved into an &quot;_nbs_only&quot; output file. This output is used only by process 11--it does not contain phrases and is therefore not imported.</P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc11SplitNbsAllLstToIndvCatLsts"/><H2>[<A HREF="#zTpkcMasterBuild3of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (3/4): <CODE>zTpkc11SplitNbsAllLstToIndvCatLsts</CODE></H2>


<P><UL>
	<LI><B>Process:</B><UL>
		<LI><U>File</U>: <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_3of4__usr_cfg_frm_all_cmd_list\11_split_nbs_all_cat_lst_to_indv_cats.px.txt</CODE></LI>
	</UL></LI>
	<LI><B>Input:</B> The output of <CODE><A HREF="#zTpkc10ElimBtstrpKCsFromTpAllCatLst">zTpkc10ElimBtstrpKCsFromTpAllCatLst</A></CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><U>On disk</U> <I>(the <A HREF="../plain_text_phrase_files.html#fformat">plain-text phrase-file</A>)</I><UL>
			<LI><CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum">zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum</A>}/output/usr_spcfc_cfg__bldproc10thr13/indv_cat_lists__bldproc11/<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/output/usr_spcfc_cfg__bldproc10thr13/indv_cat_lists__bldproc11/file.txt">file.txt</A></CODE> &nbsp; &nbsp; <I>(Replace <CODE>&quot;file&quot;</CODE> with any category in <CODE><A HREF="#zTpkcAllCategoryAbrvLCsQbl">zTpkcAllCategoryAbrvLCsQbl</A></CODE>)</I></LI>
			<LI>One additional file, containing all lines in the <A HREF="index.html#tpacl">TextPad all-command-list</A> that are user-created macros or tools or, in a <A HREF="#livevtest">test-build</A>, all commands in ignored categories.</LI>
		</UL>
		<LI>PhraseExpress import-folder: <I>Not-applicable</I></LI>
	</UL></LI>
</UL></P>

<P></P>

<P>For each catetgory, the all-command list is searched for the lines <A HREF="../../textpad__tpkc/for_v_7_0_9/documentation_and_scripts/_all_matching_lines_for_each_cat_in_all_cmd_all_cat_file.txt">as specified in this file</A>. Those lines are marked, cut, and then pasted into a new file, named <CODE>[cat-abrv].txt</CODE>.</P>

<P>Since the <A HREF="#charcatcmdnameexception">character category is an exception</A>, the characters in this category-file's first column must be changed to TPKC-project-appropriate command names.</P>

<P>Before closing the file, all command-names are verified to ensure they are exactly as expected. This is mostly to catch badly-named macros and tools that may conflict with actual built-in commands. The sub-script that verifies the command names is
<BR> &nbsp; &nbsp; <CODE>zzVerifyCatCmdsInCurrUsrCfgFile_M_catl</CODE>
<BR>which is in the file
<BR> &nbsp; &nbsp; <CODE>zSUB__verify_cmd_names_in_raw_usr_cfg_generic.px.txt</CODE></P>


<PRE>

<HR/>

</PRE>
<a name="zTpkc12CreateRawUsrCfgFromIndvCatLists"/><H2>[<A HREF="#zTpkcMasterBuild3of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (3/4): <CODE>zTpkc12CreateRawUsrCfgFromIndvCatLists</CODE></H2>

<P><UL>
	<LI><B>Process:</B><UL>
		<LI><U>File</U>: <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_3of4__usr_cfg_frm_all_cmd_list\12_create_raw_usr_cfg_from_indv_cat_lists.px.txt</CODE></LI>
	</UL></LI>
	<LI><B>Input:</B> The output of <CODE><A HREF="#zTpkc11SplitNbsAllLstToIndvCatLsts">zTpkc11SplitNbsAllLstToIndvCatLsts</A></CODE></LI>
	<LI><B>Output:</B><UL>
		<LI><U>On disk</U>:</I>
		<BR> &nbsp; &nbsp; <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum">zXPROOT_DIR_tpkcUsrCfgUserBase_M_tpkcum</A>}/output/usr_spcfc_cfg__bldproc10thr13/raw_user_config__bldproc12/<A HREF="../../textpad__tpkc/for_v_7_0_9/user_config/tp_frsh_instl/output/usr_spcfc_cfg__bldproc10thr13/raw_user_config__bldproc12/file.txt">file.txt</A></CODE> &nbsp; &nbsp; <I>(Replace <CODE>&quot;file&quot;</CODE> with any category in <CODE>zTpkcAllCategoryAbrvLCsQbl</CODE>)</I></LI>
		<LI>PhraseExpress import-folder: <I>Not-applicable</I></LI>
	</UL></LI>
</UL></P>

<P>This process makes a large number of replacements (as of August 2013: 96) in <I>every</I> individual-category-list file, transforming into the raw user configuration, or &quot;raw-user-config&quot;.</P>

<H3>Details</H3>

<P>Here is a portion of the <CODE>search.txt</CODE> raw-user-config (for version 7.0.9, and assuming none of these are bootstrap key-commands):</P>

<PRE>SearchFindPrevious      F2                      Shift+F2                Alt+F2
SearchGoto              Ctrl+Shift+G
SearchJumpNext
SearchJumpPrev
SearchOpenAll           Ctrl+F12, Ctrl+F8
SearchReplace           F5</PRE>

<P>Notes:<UL>
	<LI><CODE>SearchFindPrevious</CODE> has three key-commands.</LI>
	<LI><CODE>SearchGoto</CODE>, <CODE>SearchOpenAll</CODE>, and <CODE>SearchReplace</CODE> each have one</LI>
	<LI><CODE>SearchJumpNext</CODE> and <CODE>SearchJumpPrev</CODE> both have zero.</LI>
	<LI>Each item (the command-name, and all its key-commands) are separated from the each other with <I>two or more spaces</I>.</LI>
	<LI>The commands with zero key-commands have <I>nothing</I> following the command-name (just a line-break).</LI>
</UL></P>

<P>In this step, via a large series of search and replaces (some regex, some not), all these lines are transformed to the following:</P>

<PRE>SearchFindPrevious	3   \\\{#insert zF2\\\}   \\\{#insert zSpF2\\\}   \\\{#insert zApF2\\\}
SearchGoto   1   \\\{#insert zCSpGG\\\}
SearchJumpNext   0
SearchJumpPrev   0
SearchOpenAll   1   \\\{#insert zCpF12\\\}\\\{#insert zCpF8\\\}
SearchReplace   1   \\\{#insert zF5\\\}</PRE>

<P>Column two is the <B><A HREF="config_vars.html#NbsKcCount">nbs-key-command count</A></B>, and columns three and all following are the key-commands in XBN-PhraseExpress function-calls. All items are tab-delimited.</P>

<P>This is now the <B>raw user configuration</B>.</P>

<PRE>

<HR/>

</PRE>
<a name="zTpkc13CreateUsrSpcfcCmdConfigFromRaw"/><H2>[<A HREF="#zTpkcMasterBuild3of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (3/4): <CODE>zTpkc13CreateUsrSpcfcCmdConfigFromRaw</CODE></H2>

<P>Transforms each raw-user-config file into the TPKC user-specific command configuration, which is its final form, and is imported into PhraseExpress.</P>

<P><I>(Continues below.)</I></P>

<P><UL>
	<LI><B>Process:</B><UL>
		<LI><U>File</U>: <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_3of4__usr_cfg_frm_all_cmd_list\XXX.px.txt</CODE></LI>
	</UL></LI>
	<LI><B>Input:</B> The output from <CODE><A HREF="#zTpkc12CreateRawUsrCfgFromIndvCatLists">zTpkc12CreateRawUsrCfgFromIndvCatLists</A></CODE> (ignoring the &quot;user-created&quot; file)</LI>
	<LI><B>Output:</B> <I><A HREF="config_vars.html#locationsuscc">Documented elsewhere</A></I></LI>
</UL></P>

<P>As in process 12, here is an example snippet of raw-user-config (from <CODE>search.txt</CODE>, from TextPad 7.0.9):</P>

<PRE>SearchFindPrevious	3   \\\{#insert zF2\\\}   \\\{#insert zSpF2\\\}   \\\{#insert zApF2\\\}
SearchGoto   1   \\\{#insert zCSpGG\\\}
SearchJumpNext   0
SearchJumpPrev   0
SearchOpenAll   1   \\\{#insert zCpF12\\\}\\\{#insert zCpF8\\\}
SearchReplace   1   \\\{#insert zF5\\\}</PRE>

<P>First duplicate the raw-user-config into a new file. All following steps take place in the new file.</P>

<H4><U>Split all key-commands into separate lines</U></H4>

<PRE>SearchFindPrevious	3
\\\\\\{#insert zF2\\\\\\}
\\\\\\{#insert zSpF2\\\\\\}
\\\\\\{#insert zApF2\\\\\\}
SearchGoto   1
\\\\\\{#insert zCSpGG\\\\\\}
SearchJumpNext   0
SearchJumpPrev   0
SearchOpenAll   1
\\\\\\{#insert zCpF12\\\\\\}\\\\\\{#insert zCpF8\\\\\\}
SearchReplace   1
\\\\\\{#insert zF5\\\\\\}</PRE>

<P>This first replaces all zero-count lines with, for example
<BR> &nbsp; &nbsp; <CODE>zzTpkcSearchJumpNextNbsKcCount	0	zzTpkcSearchJumpNextNbsKcCount</CODE></P>

<P>Thene it marks all non-zero lines, counts how many, and then processes each in a loop. Note that this pre-checking the non-zero line count, is an optimization which anticipates <I>approximately less than fifty percent</I> of the 332 commands are actually assigned...if significantly-more than fifty percent have key-commands, this optimization turns into a moderate deficit.</P>

<P>Starting at the top-most it reads in the command name and nbs-key-command count number, and print the nbs-kc-count configuration variable. For each, it creates the nbs-kc-count phrase
<BR> &nbsp; &nbsp; <CODE>zzTpkcSearchFindPreviousNbsKcCount	3	zzTpkcSearchFindPreviousNbsKcCount</CODE>
<BR>and then does a sub-loop for each kc line below it (the loop counter is the just-read-in number). The end result in the user-specific command-configuration.</P>

<PRE>zzTpkcSearchFindPreviousNbsKcCount	3	zzTpkcSearchFindPreviousNbsKcCount
zzTpkcSearchFindPreviousNbsKcEsc1	\\\\\\{#insert zF2\\\\\\}\\\\\\{#insert zTSlp\\\\\\}	zzTpkcSearchFindPreviousNbsKcEsc1
zzTpkcSearchFindPreviousNbsKcEsc2	\\\\\\{#insert zSpF2\\\\\\}\\\\\\{#insert zTSlp\\\\\\}	zzTpkcSearchFindPreviousNbsKcEsc2
zzTpkcSearchFindPreviousNbsKcEsc3	\\\\\\{#insert zApF2\\\\\\}\\\\\\{#insert zTSlp\\\\\\}	zzTpkcSearchFindPreviousNbsKcEsc3</PRE>

<P>This file is then saved, with the same name, in the final output directory, as specified at the top of this section.</P>

<P>This is now the final form of the user-specific <A HREF="config_vars.html#cmdcfg">command configuration</A>.</P>



<PRE>

<HR/>

</PRE>
<a name="zTpkc14CreateNbsPhrssAndWKcQBLsFrmUSCC"/><H2>[<A HREF="#zTpkcMasterBuild4of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (4/4): <CODE>zTpkc14CreateNbsPhrssAndWKcQBLsFrmUSCC</CODE></H2>

<P>Creates a phrase for each built-in TextPad command, so your external phrases can call them, and therefore trigger individual TextPad commands. This does not create phrases for any <A HREF="../pex_in_textpad.html#tpbs">TextPad-bootstraps</A>, since they existed before the TPKC-Project was ever installed. For all Non-BootStrap (nbs) commands, this always uses the <I>first</I> configured command: <CODE>&quot;zzTpkc*NbsKcEsc1&quot;</CODE>.</P>

<P>If the <A HREF="../pex_in_textpad.html#tpbs">primary key-command</A> (see &quot;terminology&quot;) has changed, then process 14 must be run again.

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_4of4__nbs_phrss_and_cmd_ddmenu\14_create_nbs_cmd_phrss_frm_usr_cmd_cfg.px.txt</CODE></LI>
	<LI><B>Input:</B> The user-specific command configuration, as imported into PhraseExpress (no on-disk files are needed).</LI>
	<LI><B>Output:</B><UL>
		<LI><B>On disk:</B> <CODE>{#insert zzzTpkc14_outDirPNm_M_tpkcum}\[cat-abrv].px.txt</CODE></I></LI>
		<LI><B>Import to PhraseExpress folder:</B> <CODE>TPKC/User-specific phrases/Non-bootstrap TP built-in command phrases/</CODE></LI>
	</UL></LI>
</UL></P>

<P>For more information, see <A HREF="config_vars.html#cmdcfg">config_vars.html#cmdcfg</A>.</P>


<PRE>

<HR/>

</PRE>
<a name="zTpkc15CrtAllActvTPCmdsDDMenuFromAll"/><H2>[<A HREF="#zTpkcMasterBuild4of4">BACK</A>]</CODE> &nbsp; TPKC sub-build process (4/4): <CODE>zTpkc15CrtAllActvTPCmdsDDMenuFromAll</CODE></H2>

<P>Creates the foundation of the <A HREF="../xbnpe_ddmenus.html#xh">xh phrase-creator drop-down-menu</A>. While this is not required for the TPKC-project to function, not creating this severely limits the usefulness of the xh-phrase-creator ddmenu, and it is therefore strongly recommended that it be created.</P>

<P>Specifically, this process inserts all <I>active</I> TextPad built-in commands at their appropriate locations within the ddmenu. It eliminates all built-in-commands that have no key-command assigned to them.</P>

<P>Since both the indented and unindented versions of this output is saved, you can always update the indented version, <I>duplicate</I> its text to the unindented version, unindent it!, and then import it again.</P>

<P><I>Note that this requires the command-abrv qbl as created by <A HREF="#zTpkc02CreateTPBtstrpQblAndMrkRGCRegex">build-process 02</A>.</I></P>

<P><UL>
	<LI><B>File:</B> <CODE>{#insert <A HREF="index.html#zXPROOT_DIR_tpkcBuild">zXPROOT_DIR_tpkcBuild</A>}\part_4of4__nbs_phrss_and_cmd_ddmenu\15_create_command_drop_down_menu.px.txt</CODE></LI>
	<LI><B>Input:</B> The (nbs) output files from <A HREF="#zTpkc14CreateNbsPhrssAndWKcQBLsFrmUSCC">process 14</A>: <CODE>{#insert zzzTpkc14_outDirPNm_M_tpkcum}\[cat-abrv].px.txt</CODE> <I>(note categories may be merged when they have few nbs-phrases--such as <CODE>search_view.px.txt</CODE>)</I></LI>
	<LI><B>Output:</B><UL>
		<LI><B>Indented (on disk only):</B> <CODE>{#insert zzTpkc15_outDirPNm_M_tpkcum}\{#insert zzzTpkc15_outFNmIndented}</CODE></LI>
		</UL></LI>
		<LI><B>Unindented:</B><UL>
			<LI><B>On disk:</B> <CODE>{#insert zzTpkc15_outDirPNm_M_tpkcum}\{#insert zzzTpkc14_hasAKc_outFNm}</CODE></LI>
			<LI><B>Import to PhraseExpress folder:</B> <CODE>TPKC/User-specific phrases/z-DDMENU of all active TP-built-ins (AG15)/</CODE></LI>
		</UL></LI>
</UL></P>


<PRE>


























</PRE>
</BODY></HTML>



